name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫—É main (–∏–ª–∏ master, –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –µ–µ)

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é Ubuntu

    steps:
      - name: Checkout üèóÔ∏è
        uses: actions/checkout@v4

      - name: Setup Node.js üõ†Ô∏è
        uses: actions/setup-node@v4
        with:
          node-version: 20 # –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é LTS –≤–µ—Ä—Å–∏—é
          cache: 'yarn' # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Yarn PnP
          corepack: true # –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É

      - name: Install dependencies üì¶
        # –¢–∞–∫ –∫–∞–∫ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Yarn PnP, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å 'yarn'.
        # Yarn —Å–∞–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç PnP.
        run: yarn install --immutable # --immutable —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è CI

      - name: Build website üî®
        # –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∞—à production Webpack —Å–∫—Ä–∏–ø—Ç
        run: yarn build

      - name: Deploy to GitHub Pages üöÄ
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —ç–∫—à–µ–Ω –¥–ª—è –¥–µ–ø–ª–æ—è
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }} # Github –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω
          publish_dir: ./dist # –ü–∞–ø–∫–∞, –∫–æ—Ç–æ—Ä—É—é Webpack —Å–æ–±–∏—Ä–∞–µ—Ç (—É–∫–∞–∑–∞–Ω–∞ –≤ –≤–∞—à–µ–º webpack.config.js)
          publish_branch: gh-pages # –í–µ—Ç–∫–∞, –∫—É–¥–∞ –±—É–¥–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç —Å–∞–π—Ç
          # user_name: 'github-actions[bot]' # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ—Ä–∞ –∫–æ–º–º–∏—Ç–∞
          # user_email: 'github-actions[bot]@users.noreply.github.com' # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ