name: Build + Deploy to GitHub Pages

on:
  push:
    branches:
      - main # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫—É main (–∏–ª–∏ master, –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –µ–µ)
  # –î–æ–±–∞–≤—å—Ç–µ workflow_dispatch –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞ –≤—Ä—É—á–Ω—É—é –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ GitHub
  workflow_dispatch:

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é Ubuntu
    # –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–¥–ª—è peaceiris/actions-gh-pages)
    permissions:
      contents: write
      pages: write # –î–æ–±–∞–≤—å—Ç–µ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –Ω–æ–≤—ã–π —Å–ø–æ—Å–æ–± –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ GitHub Pages Action
      id-token: write # –î–æ–±–∞–≤—å—Ç–µ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –Ω–æ–≤—ã–π —Å–ø–æ—Å–æ–± –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ GitHub Pages Action

    steps:
      - name: Checkout üèóÔ∏è
        uses: actions/checkout@v4 # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é

      - name: Enable Corepack
        run: corepack enable # –í–∫–ª—é—á–∞–µ–º Corepack –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏ –ø–∞–∫–µ—Ç–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

      - name: Setup Node.js üõ†Ô∏è
        uses: actions/setup-node@v4 # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
        with:
          node-version: 20 # –£–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é LTS –≤–µ—Ä—Å–∏—é Node.js
          cache: 'yarn' # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Yarn
          corepack: true # –£–∫–∞–∑—ã–≤–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Corepack

      - name: Install dependencies üì¶
        # –¢–∞–∫ –∫–∞–∫ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Yarn PnP, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å 'yarn'.
        # '--immutable' —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è CI, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å.
        run: yarn install --immutable

      - name: Build website üî®
        # –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∞—à production Webpack —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–ø–µ—Ä—å —É—á–∏—Ç—ã–≤–∞–µ—Ç publicPath
        run: yarn build

      - name: Setup Pages # –®–∞–≥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è Pages (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –¥–µ–ø–ª–æ—è)
        uses: actions/configure-pages@v5 # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é

      - name: Upload artifact for Pages # –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –¥–ª—è –¥–µ–ø–ª–æ—è
        uses: actions/upload-pages-artifact@v3 # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
        with:
          # –£–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å–æ —Å–æ–±—Ä–∞–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏,
          # –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
          path: './dist'

      - name: Deploy to GitHub Pages üöÄ # –®–∞–≥ –¥–µ–ø–ª–æ—è
        id: deployment # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º ID –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —ç—Ç–æ—Ç —à–∞–≥
        uses: actions/deploy-pages@v4 # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
        # –£ —ç—Ç–æ–≥–æ action –Ω–µ—Ç –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ publish_dir –∏–ª–∏ publish_branch,
        # –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π –ø—Ä–µ–¥—ã–¥—É—â–∏–º —à–∞–≥–æ–º actions/upload-pages-artifact