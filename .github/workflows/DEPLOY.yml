name: Build + Deploy to GitHub Pages

on:
  push:
    branches:
      - main # –ó–∞–ø—É—Å–∫–∞–µ–º workflow –ø—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫—É main
  workflow_dispatch: # –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ –≤—Ä—É—á–Ω—É—é

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    permissions:
      # –î–ª—è peaceiris/actions-gh-pages –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
      contents: write
    steps:
      - name: Checkout üèóÔ∏è
        uses: actions/checkout@v4

      - name: Enable Corepack
        run: corepack enable

      - name: Setup Node.js üõ†Ô∏è
        uses: actions/setup-node@v4
        with:
          node-version: 20 # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é LTS –≤–µ—Ä—Å–∏—é
          cache: 'yarn'

      - name: Install dependencies üì¶
        run: yarn install --immutable

      - name: Build website üî®
        run: yarn build # –≠—Ç–æ—Ç —à–∞–≥ —Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç –≤ –ø–∞–ø–∫—É ./dist

      # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª .nojekyll –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ Jekyll
      # –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —à–∞–≥, –µ—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–ø—É—Å–∫–æ–º —Ñ–∞–π–ª–æ–≤/–ø–∞–ø–æ–∫,
      # –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö—Å—è —Å –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è (_)
      # - name: Create .nojekyll file
      #   run: touch ./dist/.nojekyll


      # !!! –í–û–ó–í–†–ê–©–ï–ù–û: –î–µ–ø–ª–æ–π –≤ –≤–µ—Ç–∫—É gh-pages —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º peaceiris/actions-gh-pages !!!
      - name: Deploy to GitHub Pages üöÄ
        uses: peaceiris/actions-gh-pages@v4 # –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç–∫—à–µ–Ω –¥–ª—è –¥–µ–ø–ª–æ—è –≤ –≤–µ—Ç–∫—É gh-pages
        with:
          # GitHub –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏
          github_token: ${{ secrets.GITHUB_TOKEN }}
          # –ü–∞–ø–∫–∞ —Å –≥–æ—Ç–æ–≤—ã–º —Å–∞–π—Ç–æ–º, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
          publish_dir: ./dist
          # –í–µ—Ç–∫–∞, –≤ –∫–æ—Ç–æ—Ä—É—é –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω —Å–∞–π—Ç –¥–ª—è GitHub Pages
          publish_branch: gh-pages
          # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ—Ä–∞ –∫–æ–º–º–∏—Ç–∞ –≤ –≤–µ—Ç–∫–µ gh-pages
          # user_name: 'github-actions[bot]'
          # user_email: 'github-actions[bot]@users.noreply.github.com'